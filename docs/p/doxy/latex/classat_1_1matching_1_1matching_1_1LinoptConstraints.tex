\hypertarget{classat_1_1matching_1_1matching_1_1LinoptConstraints}{}\doxysection{at.\+matching.\+matching.\+Linopt\+Constraints Class Reference}
\label{classat_1_1matching_1_1matching_1_1LinoptConstraints}\index{at.matching.matching.LinoptConstraints@{at.matching.matching.LinoptConstraints}}


Inheritance diagram for at.\+matching.\+matching.\+Linopt\+Constraints\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=262pt]{classat_1_1matching_1_1matching_1_1LinoptConstraints__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for at.\+matching.\+matching.\+Linopt\+Constraints\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=262pt]{classat_1_1matching_1_1matching_1_1LinoptConstraints__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{classat_1_1matching_1_1matching_1_1LinoptConstraints_a4022e5cd8cdf7c82592b065026738efa}{\+\_\+\+\_\+init\+\_\+\+\_\+}} (self, ring, $\ast$$\ast$kwargs)
\item 
def \mbox{\hyperlink{classat_1_1matching_1_1matching_1_1LinoptConstraints_ae2e9ea047861fe51af4fd03c2c18abc4}{add}} (self, param, target, refpts=None, index=None, name=None, $\ast$$\ast$kwargs)
\item 
def \mbox{\hyperlink{classat_1_1matching_1_1matching_1_1LinoptConstraints_ae3bbbadb24912254397e51bab56dd357}{compute}} (self, ring, $\ast$args, $\ast$$\ast$kwargs)
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classat_1_1matching_1_1matching_1_1LinoptConstraints_aecea5b8219327022f7770c3e4d2175dd}\label{classat_1_1matching_1_1matching_1_1LinoptConstraints_aecea5b8219327022f7770c3e4d2175dd}} 
{\bfseries get\+\_\+chrom}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}Container for linear optics constraints:
  - a constraint can be set on any result of at.get_optics
  - constraints are added to the container with the LinoptConstraints.add
    method.

  at.get_optics is called once before the evaluation of all constraints

  Example:
      cnstrs = LinoptConstraints(ring, dp=0.01, coupled=False)

      # Add a beta H (beta[0]) constraint at location ref_inj
      cnstrs.add('beta_x_inj', 'beta', 18.0, refpts=ref_inj, index=0)

      # Add a tune constraint
      cnstrs.add('tunes', 0.44, index=0, weight=0.01)

      # Add a chromaticity constraint (both planes)
      cnstrs.add('chroms', [0.0 0.0])

      # define a constraint of phase advances between 2 points
      def mu_diff(lindata, tune, chrom):
          delta_mu = (lindata[1].mu - lindata[0].mu)/(2*np.pi)
          return delta_mu % 1.0

      # Add a H phase advance constraint, giving the desired locations
      cnstrs.add(mu_diff, 0.5, refpts=[sf0 sf1], index=0)
\end{DoxyVerb}
 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classat_1_1matching_1_1matching_1_1LinoptConstraints_a4022e5cd8cdf7c82592b065026738efa}\label{classat_1_1matching_1_1matching_1_1LinoptConstraints_a4022e5cd8cdf7c82592b065026738efa}} 
\index{at.matching.matching.LinoptConstraints@{at.matching.matching.LinoptConstraints}!\_\_init\_\_@{\_\_init\_\_}}
\index{\_\_init\_\_@{\_\_init\_\_}!at.matching.matching.LinoptConstraints@{at.matching.matching.LinoptConstraints}}
\doxysubsubsection{\texorpdfstring{\_\_init\_\_()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def at.\+matching.\+matching.\+Linopt\+Constraints.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{ring,  }\item[{$\ast$$\ast$}]{kwargs }\end{DoxyParamCaption})}

\begin{DoxyVerb}Build a LinoptConstraints container

KEYWORDS
dp=0.0          momentum deviation.
twiss_in=None   Initial twiss parameters for transfer line optics.
        "lindata" stucture, where only the beta and alpha are
        required and used.
orbit=None      Initial trajectory for transfer line
        ((6,) array)
method=linopt6  Method used for the analysis of the transfer matrix.
        Can be None, at.linopt2, at.linopt4, at.linopt6
        linopt2:    no longitudinal motion, no H/V coupling,
        linopt4:    no longitudinal motion, Sagan/Rubin
                    4D-analysis of coupled motion,
        linopt6:    with or without longitudinal motion, normal
                    mode analysis
\end{DoxyVerb}
 

\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classat_1_1matching_1_1matching_1_1LinoptConstraints_ae2e9ea047861fe51af4fd03c2c18abc4}\label{classat_1_1matching_1_1matching_1_1LinoptConstraints_ae2e9ea047861fe51af4fd03c2c18abc4}} 
\index{at.matching.matching.LinoptConstraints@{at.matching.matching.LinoptConstraints}!add@{add}}
\index{add@{add}!at.matching.matching.LinoptConstraints@{at.matching.matching.LinoptConstraints}}
\doxysubsubsection{\texorpdfstring{add()}{add()}}
{\footnotesize\ttfamily def at.\+matching.\+matching.\+Linopt\+Constraints.\+add (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{param,  }\item[{}]{target,  }\item[{}]{refpts = {\ttfamily None},  }\item[{}]{index = {\ttfamily None},  }\item[{}]{name = {\ttfamily None},  }\item[{$\ast$$\ast$}]{kwargs }\end{DoxyParamCaption})}

\begin{DoxyVerb}Add a target to the LinoptConstraints container

PARAMETERS
    param         2 possibilities:
          - parameter name: see at.linopt for the name of
            available parameters. In addition to local optical
            parameters, 'tunes' and 'chroms' are allowed.
          - user-supplied parameter evaluation function:
                value = param(lindata, tune, chrom)
            lindata contains the optics parameters at all the
              specified refpoints
            value is the constrained parameter value
              (scalar or array).
    target        desired value.

KEYWORDS
    refpts=None   location of the constraint. Several locations may be
          given to apply the same constraint at several points.
    index=None    index in the parameter array. If None, the full array
          is used.
    name=None     name of the constraint. If None, name is generated
          from param and index.
    weight=1.0    weight factor: the residual is (value-target)/weight.
    bounds=(0,0)  lower and upper bounds. The parameter is constrained
          in the interval [target-low_bound target+up_bound]
    UseInteger    Match integer part of mu, much slower as the optics
          calculation is done for all refpts

The target, weight and bounds values must be broadcastable to the shape
of value.
\end{DoxyVerb}
 \mbox{\Hypertarget{classat_1_1matching_1_1matching_1_1LinoptConstraints_ae3bbbadb24912254397e51bab56dd357}\label{classat_1_1matching_1_1matching_1_1LinoptConstraints_ae3bbbadb24912254397e51bab56dd357}} 
\index{at.matching.matching.LinoptConstraints@{at.matching.matching.LinoptConstraints}!compute@{compute}}
\index{compute@{compute}!at.matching.matching.LinoptConstraints@{at.matching.matching.LinoptConstraints}}
\doxysubsubsection{\texorpdfstring{compute()}{compute()}}
{\footnotesize\ttfamily def at.\+matching.\+matching.\+Linopt\+Constraints.\+compute (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{ring,  }\item[{$\ast$}]{args,  }\item[{$\ast$$\ast$}]{kwargs }\end{DoxyParamCaption})}

\begin{DoxyVerb}Optics computation before evaluation of all constraints\end{DoxyVerb}
 

Reimplemented from \mbox{\hyperlink{classat_1_1matching_1_1matching_1_1ElementConstraints_a6dd7b0bf17a9357f0ca9ef8d1257bbf4}{at.\+matching.\+matching.\+Element\+Constraints}}.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
at/matching/matching.\+py\end{DoxyCompactItemize}
