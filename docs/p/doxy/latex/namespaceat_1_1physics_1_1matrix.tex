\hypertarget{namespaceat_1_1physics_1_1matrix}{}\doxysection{at.\+physics.\+matrix Namespace Reference}
\label{namespaceat_1_1physics_1_1matrix}\index{at.physics.matrix@{at.physics.matrix}}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{namespaceat_1_1physics_1_1matrix_a1ac3e5626cca312a95b14ff436586ea4}{find\+\_\+m44}} (ring, dp=0.\+0, refpts=None, dct=None, orbit=None, keep\+\_\+lattice=False, $\ast$$\ast$kwargs)
\item 
def \mbox{\hyperlink{namespaceat_1_1physics_1_1matrix_ab8a4558d5a7782b460840befc3428edd}{find\+\_\+m66}} (ring, refpts=None, orbit=None, keep\+\_\+lattice=False, $\ast$$\ast$kwargs)
\item 
def \mbox{\hyperlink{namespaceat_1_1physics_1_1matrix_af332dce2323e6509cd4f74c522cf67da}{find\+\_\+elem\+\_\+m66}} (elem, orbit=None, $\ast$$\ast$kwargs)
\item 
def \mbox{\hyperlink{namespaceat_1_1physics_1_1matrix_a9300d26d5cbb852b1b75ff3e712d425f}{gen\+\_\+m66\+\_\+elem}} (ring, o4b, o4e)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}transfer matrix related functions

A collection of functions to compute 4x4 and 6x6 transfer matrices
\end{DoxyVerb}
 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespaceat_1_1physics_1_1matrix_af332dce2323e6509cd4f74c522cf67da}\label{namespaceat_1_1physics_1_1matrix_af332dce2323e6509cd4f74c522cf67da}} 
\index{at.physics.matrix@{at.physics.matrix}!find\_elem\_m66@{find\_elem\_m66}}
\index{find\_elem\_m66@{find\_elem\_m66}!at.physics.matrix@{at.physics.matrix}}
\doxysubsubsection{\texorpdfstring{find\_elem\_m66()}{find\_elem\_m66()}}
{\footnotesize\ttfamily def at.\+physics.\+matrix.\+find\+\_\+elem\+\_\+m66 (\begin{DoxyParamCaption}\item[{}]{elem,  }\item[{}]{orbit = {\ttfamily None},  }\item[{$\ast$$\ast$}]{kwargs }\end{DoxyParamCaption})}

\begin{DoxyVerb}Numerically find the 6x6 transfer matrix of a single element

INPUT
    elem                AT element

KEYWORDS
    orbit=None          closed orbit at the entrance of the element,
                        default: 0.0
    XYStep=1.e-8        transverse step for numerical computation

OUTPUT
    m66                 (6, 6) transfer matrix
\end{DoxyVerb}
 \mbox{\Hypertarget{namespaceat_1_1physics_1_1matrix_a1ac3e5626cca312a95b14ff436586ea4}\label{namespaceat_1_1physics_1_1matrix_a1ac3e5626cca312a95b14ff436586ea4}} 
\index{at.physics.matrix@{at.physics.matrix}!find\_m44@{find\_m44}}
\index{find\_m44@{find\_m44}!at.physics.matrix@{at.physics.matrix}}
\doxysubsubsection{\texorpdfstring{find\_m44()}{find\_m44()}}
{\footnotesize\ttfamily def at.\+physics.\+matrix.\+find\+\_\+m44 (\begin{DoxyParamCaption}\item[{}]{ring,  }\item[{}]{dp = {\ttfamily 0.0},  }\item[{}]{refpts = {\ttfamily None},  }\item[{}]{dct = {\ttfamily None},  }\item[{}]{orbit = {\ttfamily None},  }\item[{}]{keep\+\_\+lattice = {\ttfamily False},  }\item[{$\ast$$\ast$}]{kwargs }\end{DoxyParamCaption})}

\begin{DoxyVerb}find_m44 numerically finds the 4x4 transfer matrix of an accelerator
lattice for a particle with relative momentum deviation DP

IMPORTANT!!! find_m44 assumes constant momentum deviation.
PassMethod used for any element in the lattice SHOULD NOT
1.  change the longitudinal momentum dP
    (cavities , magnets with radiation, ...)
2.  have any time dependence (localized impedance, fast kickers, ...)

m44, t = find_m44(lattice, dp=0.0, refpts)
    return 4x4 transfer matrices between the entrance of the first element
    and each element indexed by refpts.
        m44:    full one-turn matrix at the entrance of the first element
        t:      4x4 transfer matrices between the entrance of the first
                element and each element indexed by refpts:
                (Nrefs, 4, 4) array

Unless an input orbit is introduced, find_m44 assumes that the lattice is
a ring and first finds the closed orbit.

PARAMETERS
    ring            lattice description
    dp              momentum deviation. Defaults to 0
    refpts          elements at which data is returned. It can be:
                    1) an integer in the range [-len(ring), len(ring)-1]
                       selecting the element according to python indexing
                       rules. As a special case, len(ring) is allowed and
                       refers to the end of the last element,
                    2) an ordered list of such integers without duplicates,
                    3) a numpy array of booleans of maximum length
                       len(ring)+1, where selected elements are True.
                    Defaults to None, if refpts is None an empty array is
                    returned for mstack.

KEYWORDS
    dct=None        path lengthening. If specified, dp is ignored and
                    the off-momentum is deduced from the path lengthening.
    orbit=None      avoids looking for the closed orbit if is already known
                    ((6,) array)
    keep_lattice=False  When True, assume no lattice change since the
                    previous tracking.
    full=False      When True, matrices are full 1-turn matrices at
                    the entrance of each
                    element indexed by refpts.
    orbit=None      Avoids looking for the closed orbit if is already
                    known (6,) array
    XYStep=1.e-8    transverse step for numerical computation

See also find_m66, find_orbit4
\end{DoxyVerb}
 \mbox{\Hypertarget{namespaceat_1_1physics_1_1matrix_ab8a4558d5a7782b460840befc3428edd}\label{namespaceat_1_1physics_1_1matrix_ab8a4558d5a7782b460840befc3428edd}} 
\index{at.physics.matrix@{at.physics.matrix}!find\_m66@{find\_m66}}
\index{find\_m66@{find\_m66}!at.physics.matrix@{at.physics.matrix}}
\doxysubsubsection{\texorpdfstring{find\_m66()}{find\_m66()}}
{\footnotesize\ttfamily def at.\+physics.\+matrix.\+find\+\_\+m66 (\begin{DoxyParamCaption}\item[{}]{ring,  }\item[{}]{refpts = {\ttfamily None},  }\item[{}]{orbit = {\ttfamily None},  }\item[{}]{keep\+\_\+lattice = {\ttfamily False},  }\item[{$\ast$$\ast$}]{kwargs }\end{DoxyParamCaption})}

\begin{DoxyVerb}find_m66 numerically finds the 6x6 transfer matrix of an accelerator
lattice by differentiation of lattice_pass near the closed orbit.
find_m66 uses find_orbit6 to search for the closed orbit in 6-D
In order for this to work the ring MUST have a CAVITY element

m66, t = find_m66(lattice, refpts)
    m66:    full one-turn 6-by-6 matrix at the entrance of the
            first element.
    t:      6x6 transfer matrices between the entrance of the first
            element and each element indexed by refpts (nrefs, 6, 6) array.

PARAMETERS
    ring            lattice description
    dp              momentum deviation. Defaults to 0
    refpts          elements at which data is returned. It can be:
                    1) an integer in the range [-len(ring), len(ring)-1]
                       selecting the element according to python indexing
                       rules. As a special case, len(ring) is allowed and
                       refers to the end of the last element,
                    2) an ordered list of such integers without duplicates,
                    3) a numpy array of booleans of maximum length
                       len(ring)+1, where selected elements are True.
                    Defaults to None, if refpts is None an empty array is
                    returned for mstack.

KEYWORDS
    keep_lattice=False  When True, assume no lattice change since the
                        previous tracking.
    orbit=None          Avoids looking for the closed orbit if is already
                        known (6,) array
    XYStep=1.e-8        transverse step for numerical computation

See also find_m44, find_orbit6
\end{DoxyVerb}
 \mbox{\Hypertarget{namespaceat_1_1physics_1_1matrix_a9300d26d5cbb852b1b75ff3e712d425f}\label{namespaceat_1_1physics_1_1matrix_a9300d26d5cbb852b1b75ff3e712d425f}} 
\index{at.physics.matrix@{at.physics.matrix}!gen\_m66\_elem@{gen\_m66\_elem}}
\index{gen\_m66\_elem@{gen\_m66\_elem}!at.physics.matrix@{at.physics.matrix}}
\doxysubsubsection{\texorpdfstring{gen\_m66\_elem()}{gen\_m66\_elem()}}
{\footnotesize\ttfamily def at.\+physics.\+matrix.\+gen\+\_\+m66\+\_\+elem (\begin{DoxyParamCaption}\item[{}]{ring,  }\item[{}]{o4b,  }\item[{}]{o4e }\end{DoxyParamCaption})}

\begin{DoxyVerb}converts a ring to a linear 6x6 matrix tracking elemtn
\end{DoxyVerb}
 