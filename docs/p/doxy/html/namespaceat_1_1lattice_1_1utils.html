<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>pyAT: at.lattice.utils Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="company_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">pyAT
   &#160;<span id="projectnumber">0.2</span>
   </div>
   <div id="projectbrief">Python implementation of the Accelerator Toolbox</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceat.html">at</a></li><li class="navelem"><a class="el" href="namespaceat_1_1lattice.html">lattice</a></li><li class="navelem"><a class="el" href="namespaceat_1_1lattice_1_1utils.html">utils</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">at.lattice.utils Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classat_1_1lattice_1_1utils_1_1AtError.html">AtError</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classat_1_1lattice_1_1utils_1_1AtWarning.html">AtWarning</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a658bcec1e7fe75fb34f2d0baa027be8a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceat_1_1lattice_1_1utils.html#a658bcec1e7fe75fb34f2d0baa027be8a">check_radiation</a> (rad)</td></tr>
<tr class="separator:a658bcec1e7fe75fb34f2d0baa027be8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ada9919e6532a05c37b348a3761e82e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceat_1_1lattice_1_1utils.html#a9ada9919e6532a05c37b348a3761e82e">set_radiation</a> (rad)</td></tr>
<tr class="separator:a9ada9919e6532a05c37b348a3761e82e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58df8854d07de95554cb79c2c09d8039"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceat_1_1lattice_1_1utils.html#a58df8854d07de95554cb79c2c09d8039">make_copy</a> (copy)</td></tr>
<tr class="separator:a58df8854d07de95554cb79c2c09d8039"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e88727bdd89ddb176ff00c972ccb3cf"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceat_1_1lattice_1_1utils.html#a8e88727bdd89ddb176ff00c972ccb3cf">uint32_refpts</a> (refpts, n_elements)</td></tr>
<tr class="separator:a8e88727bdd89ddb176ff00c972ccb3cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb7ed8e34370ccb28e41dba5742cdf96"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceat_1_1lattice_1_1utils.html#abb7ed8e34370ccb28e41dba5742cdf96">bool_refpts</a> (refpts, n_elements)</td></tr>
<tr class="separator:abb7ed8e34370ccb28e41dba5742cdf96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8c8fa9031eb8d62694a8789a122230a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceat_1_1lattice_1_1utils.html#ac8c8fa9031eb8d62694a8789a122230a">checkattr</a> (*args)</td></tr>
<tr class="separator:ac8c8fa9031eb8d62694a8789a122230a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75bcb068916f3cb9a7cd3f80a9e77b65"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceat_1_1lattice_1_1utils.html#a75bcb068916f3cb9a7cd3f80a9e77b65">checktype</a> (eltype)</td></tr>
<tr class="separator:a75bcb068916f3cb9a7cd3f80a9e77b65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f692b05616a0ec4a849fdb3be0a0713"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceat_1_1lattice_1_1utils.html#a7f692b05616a0ec4a849fdb3be0a0713">checkname</a> (pattern)</td></tr>
<tr class="separator:a7f692b05616a0ec4a849fdb3be0a0713"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f35ad753e1fd06eb2cfe0d318e49f85"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceat_1_1lattice_1_1utils.html#a0f35ad753e1fd06eb2cfe0d318e49f85">get_cells</a> (ring, *args)</td></tr>
<tr class="separator:a0f35ad753e1fd06eb2cfe0d318e49f85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd334e8bc906399492ecfaa3e532d11d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceat_1_1lattice_1_1utils.html#abd334e8bc906399492ecfaa3e532d11d">refpts_iterator</a> (ring, refpts)</td></tr>
<tr class="separator:abd334e8bc906399492ecfaa3e532d11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7da3ea134aa75b607867430106c58eee"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceat_1_1lattice_1_1utils.html#a7da3ea134aa75b607867430106c58eee">refpts_count</a> (refpts, n_elements)</td></tr>
<tr class="separator:a7da3ea134aa75b607867430106c58eee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adce2c9b00ad9aa8fde572012c59d7c1c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceat_1_1lattice_1_1utils.html#adce2c9b00ad9aa8fde572012c59d7c1c">refpts_len</a> (ring, refpts)</td></tr>
<tr class="separator:adce2c9b00ad9aa8fde572012c59d7c1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a28997de2ea0809612c4d4434546cf1"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceat_1_1lattice_1_1utils.html#a2a28997de2ea0809612c4d4434546cf1">get_refpts</a> (ring, key, quiet=True)</td></tr>
<tr class="separator:a2a28997de2ea0809612c4d4434546cf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa12a26d837111eb5cca4dc11c72ac984"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceat_1_1lattice_1_1utils.html#aa12a26d837111eb5cca4dc11c72ac984">get_elements</a> (ring, key, quiet=True)</td></tr>
<tr class="separator:aa12a26d837111eb5cca4dc11c72ac984"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43f9c12da672191210564a4ee09e3250"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceat_1_1lattice_1_1utils.html#a43f9c12da672191210564a4ee09e3250">get_value_refpts</a> (ring, refpts, var, index=None)</td></tr>
<tr class="separator:a43f9c12da672191210564a4ee09e3250"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbd8456676a677cad3b1776da2b07a11"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceat_1_1lattice_1_1utils.html#abbd8456676a677cad3b1776da2b07a11">set_value_refpts</a> (ring, refpts, var, values, index=None, increment=False, copy=False)</td></tr>
<tr class="separator:abbd8456676a677cad3b1776da2b07a11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d5273d85a8e5b4eba6aa64559d5ccf3"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceat_1_1lattice_1_1utils.html#a1d5273d85a8e5b4eba6aa64559d5ccf3">get_s_pos</a> (ring, refpts=None)</td></tr>
<tr class="separator:a1d5273d85a8e5b4eba6aa64559d5ccf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01336a661704182eee8f31809bd14dde"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceat_1_1lattice_1_1utils.html#a01336a661704182eee8f31809bd14dde">tilt_elem</a> (elem, rots, relative=False)</td></tr>
<tr class="separator:a01336a661704182eee8f31809bd14dde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa635e0eb332f7d09fc0de8182eeeacd9"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceat_1_1lattice_1_1utils.html#aa635e0eb332f7d09fc0de8182eeeacd9">shift_elem</a> (elem, deltax=0.0, deltaz=0.0, relative=False)</td></tr>
<tr class="separator:aa635e0eb332f7d09fc0de8182eeeacd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ed6aa37b8fe1c98e75d5661f67a5c04"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceat_1_1lattice_1_1utils.html#a4ed6aa37b8fe1c98e75d5661f67a5c04">set_tilt</a> (ring, tilts, relative=False)</td></tr>
<tr class="separator:a4ed6aa37b8fe1c98e75d5661f67a5c04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f12d0cea95576198f4ad1fc66b06ae7"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceat_1_1lattice_1_1utils.html#a4f12d0cea95576198f4ad1fc66b06ae7">set_shift</a> (ring, dxs, dzs, relative=False)</td></tr>
<tr class="separator:a4f12d0cea95576198f4ad1fc66b06ae7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Helper functions for working with AT lattices.

A lattice as understood by pyAT is any sequence of elements.  These functions
are useful for working with these sequences.

The refpts allow functions to select points in the lattice, returned values are
given at the entrance of each element specified in refpts;
refpts can be:
- an integer in the range [-len(ring), len(ring)-1] selecting the element
    according to python indexing rules. As a special case, len(ring) is
    allowed and refers to the end of the last element,
- an ordered list of such integers without duplicates,
- a numpy array of booleans of maximum length len(ring)+1, where selected
    elements are True.
</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="abb7ed8e34370ccb28e41dba5742cdf96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb7ed8e34370ccb28e41dba5742cdf96">&#9670;&nbsp;</a></span>bool_refpts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def at.lattice.utils.bool_refpts </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>refpts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>n_elements</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return a boolean numpy array of length n_elements + 1 where True elements
are selected. This is used for indexing a lattice using True or False
values.
</pre> 
</div>
</div>
<a id="a658bcec1e7fe75fb34f2d0baa027be8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a658bcec1e7fe75fb34f2d0baa027be8a">&#9670;&nbsp;</a></span>check_radiation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def at.lattice.utils.check_radiation </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>rad</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Function to be used as a decorator for optics functions

If ring is a Lattice object, raises an exception
    if ring.radiation is not rad

If ring is any other sequence, no test is performed
</pre> 
</div>
</div>
<a id="ac8c8fa9031eb8d62694a8789a122230a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8c8fa9031eb8d62694a8789a122230a">&#9670;&nbsp;</a></span>checkattr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def at.lattice.utils.checkattr </td>
          <td>(</td>
          <td class="paramtype">*&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return a function to be used as a filter. Check the presence or the
value of an attribute. This function can be used to extract from a ring
all elements have a given attribute.

filtfunc = checkattr(attrname)
    returns the function filtfunc such that ok=filtfunc(element) is True if
    the element has a 'attrname' attribute

filtfunc = checkattr(attrname, attrvalue)
    returns the function filtfunc such that ok=filtfunc(element) is True if
    the element has a 'attrname' attribute with the value attrvalue

Examples:

cavs = filter(checkattr('Frequency'), ring)
    returns an iterator over all elements in ring that have a
    'Frequency' attribute

elts = filter(checkattr('K', 0.0), ring)
    returns an iterator over all elements in ring that have a 'K'
    attribute equal to 0.0
</pre> 
</div>
</div>
<a id="a7f692b05616a0ec4a849fdb3be0a0713"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f692b05616a0ec4a849fdb3be0a0713">&#9670;&nbsp;</a></span>checkname()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def at.lattice.utils.checkname </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pattern</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return a function to be used as a filter. Check the name of an element.
This function can be used to extract from a ring all elements have a
given FamName attribute.

filtfunc = checkname(pattern)
    returns the function filtfunc such that ok=filtfunc(element) is True
    if the element's FamName matches pattern.

Example:

qps = filter(checkname('QF.*'), ring)
    returns an iterator over all elements
</pre> 
</div>
</div>
<a id="a75bcb068916f3cb9a7cd3f80a9e77b65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75bcb068916f3cb9a7cd3f80a9e77b65">&#9670;&nbsp;</a></span>checktype()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def at.lattice.utils.checktype </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>eltype</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return a function to be used as a filter. Check the type of an element.
This function can be used to extract from a ring all elements have a
given type.

filtfunc = checktype(class)
    returns the function filtfunc such that ok=filtfunc(element) is True
    if the element is an instance of class

Example:

qps = filter(checktype(at.Quadrupole), ring)
    returns an iterator over all quadrupoles in ring
</pre> 
</div>
</div>
<a id="a0f35ad753e1fd06eb2cfe0d318e49f85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f35ad753e1fd06eb2cfe0d318e49f85">&#9670;&nbsp;</a></span>get_cells()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def at.lattice.utils.get_cells </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return a numpy array of booleans, with the same length as ring,
marking all elements satisfying a given condition.

refpts = getcells(ring, filtfunc)
    selects all elements for which the function filtfunc(element)
    returns True

refpts = getcells(ring, attrname)
    selects all elements having a 'attrname' attribute

refpts = getcells(ring, attrname, attrvalue)
    selects all elements having a 'attrname' attribute with value attrvalue

Example:

refpts = getcells(ring, 'Frequency')
    returns a numpy array of booleans where all elements having a
    'Frequency' attribute are True

refpts = getcells(ring, 'K', 0.0)
    returns a numpy array of booleans where all elements having a 'K'
    attribute equal to 0.0 are True
</pre> 
</div>
</div>
<a id="aa12a26d837111eb5cca4dc11c72ac984"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa12a26d837111eb5cca4dc11c72ac984">&#9670;&nbsp;</a></span>get_elements()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def at.lattice.utils.get_elements </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>quiet</em> = <code>True</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Get the elements of a family or class (type) from the lattice.

Args:
    ring: lattice from which to retrieve the elements.
    key: can be:
         1) an element instance, will return all elements of the same type
            in the lattice, e.g. key=Drift('d1', 1.0)
         2) an element type, will return all elements of that type in the
            lattice, e.g. key=at.elements.Sextupole
         3) a string to match against elements' FamName, supports Unix
            shell-style wildcards, e.g. key='BPM_*1'
    quiet: if false print information about matched elements for FamName
           matches, defaults to True.

Returns:
    a list of elems matching key
</pre> 
</div>
</div>
<a id="a2a28997de2ea0809612c4d4434546cf1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a28997de2ea0809612c4d4434546cf1">&#9670;&nbsp;</a></span>get_refpts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def at.lattice.utils.get_refpts </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>quiet</em> = <code>True</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Get the elements refpts of a family or class (type) from the lattice.

Args:
    ring: lattice from which to retrieve the elements.
    key: can be:
         1) an element instance, will return all elements of the same type
            in the lattice, e.g. key=Drift('d1', 1.0)
         2) an element type, will return all elements of that type in the
            lattice, e.g. key=at.elements.Sextupole
         3) a string to match against elements' FamName, supports Unix
            shell-style wildcards, e.g. key='BPM_*1'
    quiet: if false print information about matched elements for FamName
           matches, defaults to True.

Returns:
    elems: a list of elems refpts matching key
</pre> 
</div>
</div>
<a id="a1d5273d85a8e5b4eba6aa64559d5ccf3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d5273d85a8e5b4eba6aa64559d5ccf3">&#9670;&nbsp;</a></span>get_s_pos()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def at.lattice.utils.get_s_pos </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>refpts</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return a numpy array corresponding to the s position of the specified
elements.

Args:
    ring: lattice from which to retrieve s position
    refpts: elements at which to return s position. If None, return
            s position at all elements in the ring.
</pre> 
</div>
</div>
<a id="a43f9c12da672191210564a4ee09e3250"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43f9c12da672191210564a4ee09e3250">&#9670;&nbsp;</a></span>get_value_refpts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def at.lattice.utils.get_value_refpts </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>refpts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>index</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Get the values of an attribute of an array of elements based on
their refpts

PARAMETERS:
    ring            Lattice description
    refpts          Integer, array of integer or booleans, filter
    var             attribute name

KEYWORDS:
    index=None      index of the value to retrieve if var is an array.
                    If None the full array is retrieved (Default)
</pre> 
</div>
</div>
<a id="a58df8854d07de95554cb79c2c09d8039"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58df8854d07de95554cb79c2c09d8039">&#9670;&nbsp;</a></span>make_copy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def at.lattice.utils.make_copy </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>copy</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Function to be used as a decorator for optics functions
The decorated function must be defined as:

def func(ring, refpts, *args, **kwargs):
    ...
    return

If copy is False, the function is not modified,
If copy is True, a shallow copy of ring is done, then the elements selected
by refpts are deep-copied, then func is applied to the copy, and the new
ring is returned.
</pre> 
</div>
</div>
<a id="a7da3ea134aa75b607867430106c58eee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7da3ea134aa75b607867430106c58eee">&#9670;&nbsp;</a></span>refpts_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def at.lattice.utils.refpts_count </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>refpts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>n_elements</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Number of reference points</pre> 
</div>
</div>
<a id="abd334e8bc906399492ecfaa3e532d11d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd334e8bc906399492ecfaa3e532d11d">&#9670;&nbsp;</a></span>refpts_iterator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def at.lattice.utils.refpts_iterator </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>refpts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return an iterator over all elements in ring identified by refpts.

refpts may be:

1) a integer or a sequence of integers (0 indicating the first element)
2) a sequence of booleans marking the selected elements
3) a callable f such that f(elem) is True for selected elements
</pre> 
</div>
</div>
<a id="adce2c9b00ad9aa8fde572012c59d7c1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adce2c9b00ad9aa8fde572012c59d7c1c">&#9670;&nbsp;</a></span>refpts_len()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def at.lattice.utils.refpts_len </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>refpts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Number of reference points</pre> 
</div>
</div>
<a id="a9ada9919e6532a05c37b348a3761e82e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ada9919e6532a05c37b348a3761e82e">&#9670;&nbsp;</a></span>set_radiation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def at.lattice.utils.set_radiation </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>rad</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Function to be used as a decorator for optics functions
The decorated function must be defined as:

def func(ring, *args, **kwargs):
    ...
    return

func will be called with a copy of the ring such that its radiation state
is set to rad (no copy is done if it's already the case).
</pre> 
</div>
</div>
<a id="a4f12d0cea95576198f4ad1fc66b06ae7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f12d0cea95576198f4ad1fc66b06ae7">&#9670;&nbsp;</a></span>set_shift()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def at.lattice.utils.set_shift </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dxs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dzs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>relative</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Set translations to a list of elements.

ring            sequence of elements to be shifted
dxs             sequence of horizontal displacement as long as ring or
                scalar horizontal displacement applied to all elements
dzs             sequence of vertical displacement as long as ring or
                scalar vertical displacement applied to all elements
relative=False  Displacement relative to the previous alignment
</pre> 
</div>
</div>
<a id="a4ed6aa37b8fe1c98e75d5661f67a5c04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ed6aa37b8fe1c98e75d5661f67a5c04">&#9670;&nbsp;</a></span>set_tilt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def at.lattice.utils.set_tilt </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tilts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>relative</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Set tilts to a list of elements.

ring            sequence of elements to be tilted
tilts           sequence of tilt values as long as ring or
                scalar tilt value applied to all elements
relative=False  Rotation relative to the previous tilt angle
</pre> 
</div>
</div>
<a id="abbd8456676a677cad3b1776da2b07a11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbd8456676a677cad3b1776da2b07a11">&#9670;&nbsp;</a></span>set_value_refpts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def at.lattice.utils.set_value_refpts </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>refpts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>index</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>increment</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>copy</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Set the values of an attribute of an array of elements based on
their refpts

PARAMETERS:
    ring            Lattice description
    refpts          Integer, array of integer or booleans, filter
    var             attribute name
    values          desired value for the attribute

KEYWORDS:
    index=None      index of the value to change if var is an array.
                    If None the full array is replaced by value (Default)
    increment=False Add values to the initial values.
                    If False the initial value is replaced (Default)
    copy=False      If False, do the modification in-place.
                    If True, returns a shallow copy of ring with new
                    modified elements.
                    CAUTION: a shallow copy means that all non-affected
                    elements are shared with the original lattice.
                    Any further modification will affect in both lattices.
</pre> 
</div>
</div>
<a id="aa635e0eb332f7d09fc0de8182eeeacd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa635e0eb332f7d09fc0de8182eeeacd9">&#9670;&nbsp;</a></span>shift_elem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def at.lattice.utils.shift_elem </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>elem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>deltax</em> = <code>0.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>deltaz</em> = <code>0.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>relative</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">set a new displacement vector to an element.
The ranslation vectors are stored in the T1 and T2 attributes

elem            element to be displaced
deltax          horizontal displacement of the element
deltaz          vertical displacement of the element
relative=False  Displacement relative to the previous alignment
</pre> 
</div>
</div>
<a id="a01336a661704182eee8f31809bd14dde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01336a661704182eee8f31809bd14dde">&#9670;&nbsp;</a></span>tilt_elem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def at.lattice.utils.tilt_elem </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>elem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>rots</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>relative</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">set a new tilt angle to an element.
The rotation matrices are stored in the R1 and R2 attributes

R1 = [[ cos(rots) sin(rots)]    R2 = [[cos(rots) -sin(rots)]
      [-sin(rots) cos(rots)]]         [sin(rots)  cos(rots)]]

elem            element to be tilted
rots            tilt angle (in radians).
                rots &gt; 0 corresponds to a corkskew rotation of the element
                looking in the direction of the beam
relative=False  Rotation relative to the previous element rotation
</pre> 
</div>
</div>
<a id="a8e88727bdd89ddb176ff00c972ccb3cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e88727bdd89ddb176ff00c972ccb3cf">&#9670;&nbsp;</a></span>uint32_refpts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def at.lattice.utils.uint32_refpts </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>refpts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>n_elements</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Return a uint32 numpy array with contents as the indices of the selected
elements.  This is used for indexing a lattice using explicit indices.
</pre> 
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
