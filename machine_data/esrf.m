function ring=esrf()
%create esrf ring

cell={...
        atdrift('SDHI',3.0526,'Energy',6040000000);...
       atmarker('BPM');...
        atdrift('SD1U',0.867,'Energy',6040000000);...
atthinmultipole('S4',[0 0 0],[0 0.00168299600011194 1.257419],'Energy',6040000000);...
        atdrift('SD2U',0.328295,'Energy',6040000000);...
   atquadrupole('QF2',0.94341,0.39100748,'MaxOrder',2,'Energy',6040000000,'R1',[0.999999993602549 0 0.000113114550424186 0 0 0;0 0.999999993602549 0 0.000113114550424186 0 0;-0.000113114550424186 0 0.999999993602549 0 0 0;0 -0.000113114550424186 0 0.999999993602549 0 0;0 0 0 0 1 0;0 0 0 0 0 1],'R2',[0.999999993602549 0 -0.000113114550424186 0 0 0;0 0.999999993602549 0 -0.000113114550424186 0 0;0.000113114550424186 0 0.999999993602549 0 0 0;0 0.000113114550424186 0 0.999999993602549 0 0;0 0 0 0 1 0;0 0 0 0 0 1]);...
        atdrift('SD2D',0.095295,'Energy',6040000000);...
       atmarker('BPM');...
        atdrift('SDA',0.283,'Energy',6040000000);...
atthinmultipole('S6',[0 0 0],[0 0 -1.578319],'Energy',6040000000);...
        atdrift('SD3U',0.333165,'Energy',6040000000);...
   atquadrupole('QD3',0.53367001,-0.60355341,'MaxOrder',2,'Energy',6040000000,'R1',[0.99999998319754 0 -0.000183316446215012 0 0 0;0 0.99999998319754 0 -0.000183316446215012 0 0;0.000183316446215012 0 0.99999998319754 0 0 0;0 0.000183316446215012 0 0.99999998319754 0 0;0 0 0 0 1 0;0 0 0 0 0 1],'R2',[0.99999998319754 0 0.000183316446215012 0 0 0;0 0.99999998319754 0 0.000183316446215012 0 0;-0.000183316446215012 0 0.99999998319754 0 0 0;0 -0.000183316446215012 0 0.99999998319754 0 0;0 0 0 0 1 0;0 0 0 0 0 1]);...
        atdrift('SD3D',1.05542,'Energy',6040000000);...
        atsbend('B1H',2.15728897424,0.0923248,0,'BndMPoleSymplectic4Pass','EntranceAngle',0.0490874,'ExitAngle',0.0432374,'MaxOrder',2,'FringeInt',0,'FullGap',0,'Energy',6040000000,'R1',[0.999999483680597 0 -0.00101618824051287 0 0 0;0 0.999999483680597 0 -0.00101618824051287 0 0;0.00101618824051287 0 0.999999483680597 0 0 0;0 0.00101618824051287 0 0.999999483680597 0 0;0 0 0 0 1 0;0 0 0 0 0 1],'R2',[0.999999483680597 0 0.00101618824051287 0 0 0;0 0.999999483680597 0 0.00101618824051287 0 0;-0.00101618824051287 0 0.999999483680597 0 0 0;0 -0.00101618824051287 0 0.999999483680597 0 0;0 0 0 0 1 0;0 0 0 0 0 1]);...
        atsbend('B1S',0.2927106,0.00585,0,'BndMPoleSymplectic4Pass','EntranceAngle',-0.0432374,'ExitAngle',0.049087401,'MaxOrder',2,'FringeInt',0,'FullGap',0,'Energy',6040000000);...
        atdrift('SDBD',0.95475,'Energy',6040000000);...
       atmarker('BPM');...
        atdrift('SD4U',0.105945,'Energy',6040000000);...
   atquadrupole('QD4',0.42211,-0.60152555,'MaxOrder',2,'Energy',6040000000,'R1',[0.999999999931848 0 -1.1674926787203e-05 0 0 0;0 0.999999999931848 0 -1.1674926787203e-05 0 0;1.1674926787203e-05 0 0.999999999931848 0 0 0;0 1.1674926787203e-05 0 0.999999999931848 0 0;0 0 0 0 1 0;0 0 0 0 0 1],'R2',[0.999999999931848 0 1.1674926787203e-05 0 0 0;0 0.999999999931848 0 1.1674926787203e-05 0 0;-1.1674926787203e-05 0 0.999999999931848 0 0 0;0 -1.1674926787203e-05 0 0.999999999931848 0 0;0 0 0 0 1 0;0 0 0 0 0 1]);...
        atdrift('SD4D',0.338945,'Energy',6040000000);...
atthinmultipole('S13',[0 -0.000403347542 0],[0 0 -2.7478633],'Energy',6040000000);...
        atdrift('SD5U',0.42019,'Energy',6040000000);...
   atquadrupole('QF5',0.51962,0.73458678,'MaxOrder',2,'Energy',6040000000,'R1',[0.999999998465207 0 -5.5403842290333e-05 0 0 0;0 0.999999998465207 0 -5.5403842290333e-05 0 0;5.5403842290333e-05 0 0.999999998465207 0 0 0;0 5.5403842290333e-05 0 0.999999998465207 0 0;0 0 0 0 1 0;0 0 0 0 0 1],'R2',[0.999999998465207 0 5.5403842290333e-05 0 0 0;0 0.999999998465207 0 5.5403842290333e-05 0 0;-5.5403842290333e-05 0 0.999999998465207 0 0 0;0 -5.5403842290333e-05 0 0.999999998465207 0 0;0 0 0 0 1 0;0 0 0 0 0 1]);...
        atdrift('SD5D',0.10719,'Energy',6040000000);...
       atmarker('BPM');...
        atdrift('27',0.383,'Energy',6040000000);...
atthinmultipole('S19',[0 0 0],[0 0 4.6900554],'Energy',6040000000);...
        atdrift('S5PU',0.49019,'Energy',6040000000);...
   atquadrupole('QF5',0.51962,0.73458678,'MaxOrder',2,'Energy',6040000000,'R1',[0.999999992821313 0 -0.000119822255820414 0 0 0;0 0.999999992821313 0 -0.000119822255820414 0 0;0.000119822255820414 0 0.999999992821313 0 0 0;0 0.000119822255820414 0 0.999999992821313 0 0;0 0 0 0 1 0;0 0 0 0 0 1],'R2',[0.999999992821313 0 0.000119822255820414 0 0 0;0 0.999999992821313 0 0.000119822255820414 0 0;-0.000119822255820414 0 0.999999992821313 0 0 0;0 -0.000119822255820414 0 0.999999992821313 0 0;0 0 0 0 1 0;0 0 0 0 0 1]);...
        atdrift('SD5U',0.42019,'Energy',6040000000);...
atthinmultipole('S20',[0 0 0],[0 -0.000785599265662401 -2.7478633],'Energy',6040000000);...
        atdrift('SD4D',0.338945,'Energy',6040000000);...
   atquadrupole('QD4',0.42211,-0.60152555,'MaxOrder',2,'Energy',6040000000,'R1',[0.999999945659256 0 0.000329668751902437 0 0 0;0 0.999999945659256 0 0.000329668751902437 0 0;-0.000329668751902437 0 0.999999945659256 0 0 0;0 -0.000329668751902437 0 0.999999945659256 0 0;0 0 0 0 1 0;0 0 0 0 0 1],'R2',[0.999999945659256 0 -0.000329668751902437 0 0 0;0 0.999999945659256 0 -0.000329668751902437 0 0;0.000329668751902437 0 0.999999945659256 0 0 0;0 0.000329668751902437 0 0.999999945659256 0 0;0 0 0 0 1 0;0 0 0 0 0 1]);...
        atdrift('SD4U',0.105945,'Energy',6040000000);...
       atmarker('BPM');...
        atdrift('SDBD',0.95475,'Energy',6040000000);...
        atsbend('B2S',0.2927106,0.00585,0,'BndMPoleSymplectic4Pass','EntranceAngle',0.0490874,'ExitAngle',-0.0432374,'MaxOrder',2,'FringeInt',0,'FullGap',0,'Energy',6040000000);...
        atsbend('B2H',2.15728897424,0.0923248,0,'BndMPoleSymplectic4Pass','EntranceAngle',0.0432374,'ExitAngle',0.0490874,'MaxOrder',2,'FringeInt',0,'FullGap',0,'Energy',6040000000,'R1',[0.999998847943685 0 0.00151792994033684 0 0 0;0 0.999998847943685 0 0.00151792994033684 0 0;-0.00151792994033684 0 0.999998847943685 0 0 0;0 -0.00151792994033684 0 0.999998847943685 0 0;0 0 0 0 1 0;0 0 0 0 0 1],'R2',[0.999998847943685 0 -0.00151792994033684 0 0 0;0 0.999998847943685 0 -0.00151792994033684 0 0;0.00151792994033684 0 0.999998847943685 0 0 0;0 0.00151792994033684 0 0.999998847943685 0 0;0 0 0 0 1 0;0 0 0 0 0 1]);...
        atdrift('SD6U',1.06275,'BetaCode','SD','Energy',6040000000);...
   atquadrupole('QD6',0.51901,-0.81881189,'MaxOrder',2,'BetaCode','QP','Energy',6040000000,'R1',[0.999999999676293 0 2.544431660238e-05 0 0 0;0 0.999999999676293 0 2.544431660238e-05 0 0;-2.544431660238e-05 0 0.999999999676293 0 0 0;0 -2.544431660238e-05 0 0.999999999676293 0 0;0 0 0 0 1 0;0 0 0 0 0 1],'R2',[0.999999999676293 0 -2.544431660238e-05 0 0 0;0 0.999999999676293 0 -2.544431660238e-05 0 0;2.544431660238e-05 0 0.999999999676293 0 0 0;0 2.544431660238e-05 0 0.999999999676293 0 0;0 0 0 0 1 0;0 0 0 0 0 1]);...
        atdrift('SD6D',0.340495,'Energy',6040000000);...
atthinmultipole('S22',[0 0 0],[0 0 -0.814367],'Energy',6040000000);...
        atdrift('SDA',0.283,'Energy',6040000000);...
       atmarker('BPM');...
        atdrift('SD7U',0.10484,'Energy',6040000000);...
   atquadrupole('QF7',0.92432,0.68156624,'MaxOrder',2,'Energy',6040000000,'R1',[0.999999999979047 0 6.47354718674837e-06 0 0 0;0 0.999999999979047 0 6.47354718674837e-06 0 0;-6.47354718674837e-06 0 0.999999999979047 0 0 0;0 -6.47354718674837e-06 0 0.999999999979047 0 0;0 0 0 0 1 0;0 0 0 0 0 1],'R2',[0.999999999979047 0 -6.47354718674837e-06 0 0 0;0 0.999999999979047 0 -6.47354718674837e-06 0 0;6.47354718674837e-06 0 0.999999999979047 0 0 0;0 6.47354718674837e-06 0 0.999999999979047 0 0;0 0 0 0 1 0;0 0 0 0 0 1]);...
        atdrift('SD7D',0.33784,'Energy',6040000000);...
atthinmultipole('S24',[0 0 0],[0 0 1.3711441],'Energy',6040000000);...
        atdrift('SD8D',0.867,'Energy',6040000000);...
       atmarker('BPM');...
        atdrift('SDLO',3.0526,'Energy',6040000000);...
        atdrift('SDLO',3.0526,'Energy',6040000000);...
       atmarker('BPM');...
        atdrift('SD8D',0.867,'Energy',6040000000);...
atthinmultipole('S24',[0 0 0],[0 -0.00185517866679521 1.3711441],'Energy',6040000000);...
        atdrift('SD7D',0.33784,'Energy',6040000000);...
   atquadrupole('QF7',0.92432,0.68156624,'MaxOrder',2,'Energy',6040000000,'R1',[0.999999982885101 0 -0.000185012966170927 0 0 0;0 0.999999982885101 0 -0.000185012966170927 0 0;0.000185012966170927 0 0.999999982885101 0 0 0;0 0.000185012966170927 0 0.999999982885101 0 0;0 0 0 0 1 0;0 0 0 0 0 1],'R2',[0.999999982885101 0 0.000185012966170927 0 0 0;0 0.999999982885101 0 0.000185012966170927 0 0;-0.000185012966170927 0 0.999999982885101 0 0 0;0 -0.000185012966170927 0 0.999999982885101 0 0;0 0 0 0 1 0;0 0 0 0 0 1]);...
        atdrift('SD7U',0.10484,'Energy',6040000000);...
       atmarker('BPM');...
        atdrift('SDA',0.283,'Energy',6040000000);...
atthinmultipole('S22',[0 0 0],[0 0 -0.814367],'Energy',6040000000);...
        atdrift('SD6D',0.340495,'Energy',6040000000);...
   atquadrupole('QD6',0.51901,-0.81881189,'MaxOrder',2,'Energy',6040000000,'R1',[0.999999961683376 0 0.000276827106736921 0 0 0;0 0.999999961683376 0 0.000276827106736921 0 0;-0.000276827106736921 0 0.999999961683376 0 0 0;0 -0.000276827106736921 0 0.999999961683376 0 0;0 0 0 0 1 0;0 0 0 0 0 1],'R2',[0.999999961683376 0 -0.000276827106736921 0 0 0;0 0.999999961683376 0 -0.000276827106736921 0 0;0.000276827106736921 0 0.999999961683376 0 0 0;0 0.000276827106736921 0 0.999999961683376 0 0;0 0 0 0 1 0;0 0 0 0 0 1]);...
        atdrift('SD6U',1.06275,'Energy',6040000000);...
        atsbend('B1H',2.15728897424,0.0923248,0,'BndMPoleSymplectic4Pass','EntranceAngle',0.0490874,'ExitAngle',0.0432374,'MaxOrder',2,'FringeInt',0,'FullGap',0,'Energy',6040000000,'R1',[0.999998971133705 0 -0.00143447953352633 0 0 0;0 0.999998971133705 0 -0.00143447953352633 0 0;0.00143447953352633 0 0.999998971133705 0 0 0;0 0.00143447953352633 0 0.999998971133705 0 0;0 0 0 0 1 0;0 0 0 0 0 1],'R2',[0.999998971133705 0 0.00143447953352633 0 0 0;0 0.999998971133705 0 0.00143447953352633 0 0;-0.00143447953352633 0 0.999998971133705 0 0 0;0 -0.00143447953352633 0 0.999998971133705 0 0;0 0 0 0 1 0;0 0 0 0 0 1]);...
        atsbend('B1S',0.2927106,0.00585,0,'BndMPoleSymplectic4Pass','EntranceAngle',-0.0432374,'ExitAngle',0.049087401,'MaxOrder',2,'FringeInt',0,'FullGap',0,'Energy',6040000000);...
        atdrift('SDBD',0.95475,'Energy',6040000000);...
       atmarker('BPM');...
        atdrift('SD4U',0.105945,'Energy',6040000000);...
   atquadrupole('QD4',0.42211,-0.60152555,'MaxOrder',2,'Energy',6040000000,'R1',[0.999999999179975 0 4.04975279506787e-05 0 0 0;0 0.999999999179975 0 4.04975279506787e-05 0 0;-4.04975279506787e-05 0 0.999999999179975 0 0 0;0 -4.04975279506787e-05 0 0.999999999179975 0 0;0 0 0 0 1 0;0 0 0 0 0 1],'R2',[0.999999999179975 0 -4.04975279506787e-05 0 0 0;0 0.999999999179975 0 -4.04975279506787e-05 0 0;4.04975279506787e-05 0 0.999999999179975 0 0 0;0 4.04975279506787e-05 0 0.999999999179975 0 0;0 0 0 0 1 0;0 0 0 0 0 1]);...
        atdrift('SD4D',0.338945,'Energy',6040000000);...
atthinmultipole('S20',[0 1.5249e-06 0],[0 0 -2.7478633],'Energy',6040000000);...
        atdrift('SD5U',0.42019,'Energy',6040000000);...
   atquadrupole('QF5',0.51962,0.73458678,'MaxOrder',2,'Energy',6040000000,'R1',[0.999999999435512 0 3.3600242370328e-05 0 0 0;0 0.999999999435512 0 3.3600242370328e-05 0 0;-3.3600242370328e-05 0 0.999999999435512 0 0 0;0 -3.3600242370328e-05 0 0.999999999435512 0 0;0 0 0 0 1 0;0 0 0 0 0 1],'R2',[0.999999999435512 0 -3.3600242370328e-05 0 0 0;0 0.999999999435512 0 -3.3600242370328e-05 0 0;3.3600242370328e-05 0 0.999999999435512 0 0 0;0 3.3600242370328e-05 0 0.999999999435512 0 0;0 0 0 0 1 0;0 0 0 0 0 1]);...
        atdrift('SD5D',0.10719,'Energy',6040000000);...
       atmarker('BPM');...
        atdrift('27',0.383,'Energy',6040000000);...
atthinmultipole('S19',[0 0 0],[0 0 4.6900554],'Energy',6040000000);...
        atdrift('S5PU',0.49019,'Energy',6040000000);...
   atquadrupole('QF5',0.51962,0.73458678,'MaxOrder',2,'Energy',6040000000,'R1',[0.999999998978135 0 4.52076288158987e-05 0 0 0;0 0.999999998978135 0 4.52076288158987e-05 0 0;-4.52076288158987e-05 0 0.999999998978135 0 0 0;0 -4.52076288158987e-05 0 0.999999998978135 0 0;0 0 0 0 1 0;0 0 0 0 0 1],'R2',[0.999999998978135 0 -4.52076288158987e-05 0 0 0;0 0.999999998978135 0 -4.52076288158987e-05 0 0;4.52076288158987e-05 0 0.999999998978135 0 0 0;0 4.52076288158987e-05 0 0.999999998978135 0 0;0 0 0 0 1 0;0 0 0 0 0 1]);...
        atdrift('SD5U',0.42019,'Energy',6040000000);...
atthinmultipole('S13',[0 0 0],[0 0 -2.7478633],'Energy',6040000000);...
        atdrift('SD4D',0.338945,'Energy',6040000000);...
   atquadrupole('QD4',0.42211,-0.60152555,'MaxOrder',2,'Energy',6040000000,'R1',[0.999999985834548 0 -0.00016831786618255 0 0 0;0 0.999999985834548 0 -0.00016831786618255 0 0;0.00016831786618255 0 0.999999985834548 0 0 0;0 0.00016831786618255 0 0.999999985834548 0 0;0 0 0 0 1 0;0 0 0 0 0 1],'R2',[0.999999985834548 0 0.00016831786618255 0 0 0;0 0.999999985834548 0 0.00016831786618255 0 0;-0.00016831786618255 0 0.999999985834548 0 0 0;0 -0.00016831786618255 0 0.999999985834548 0 0;0 0 0 0 1 0;0 0 0 0 0 1]);...
        atdrift('SD4U',0.105945,'Energy',6040000000);...
       atmarker('BPM');...
        atdrift('SDBD',0.95475,'Energy',6040000000);...
        atsbend('B2S',0.2927106,0.00585,0,'BndMPoleSymplectic4Pass','EntranceAngle',0.0490874,'ExitAngle',-0.0432374,'MaxOrder',2,'FringeInt',0,'FullGap',0,'Energy',6040000000);...
        atsbend('B2H',2.15728897424,0.0923248,0,'BndMPoleSymplectic4Pass','EntranceAngle',0.0432374,'ExitAngle',0.0490874,'MaxOrder',2,'FringeInt',0,'FullGap',0,'Energy',6040000000,'R1',[0.999999984597451 0 0.000175513811752462 0 0 0;0 0.999999984597451 0 0.000175513811752462 0 0;-0.000175513811752462 0 0.999999984597451 0 0 0;0 -0.000175513811752462 0 0.999999984597451 0 0;0 0 0 0 1 0;0 0 0 0 0 1],'R2',[0.999999984597451 0 -0.000175513811752462 0 0 0;0 0.999999984597451 0 -0.000175513811752462 0 0;0.000175513811752462 0 0.999999984597451 0 0 0;0 0.000175513811752462 0 0.999999984597451 0 0;0 0 0 0 1 0;0 0 0 0 0 1]);...
        atdrift('SD3D',1.05542,'Energy',6040000000);...
   atquadrupole('QD3',0.53367001,-0.60355341,'MaxOrder',2,'Energy',6040000000,'R1',[0.999999783898132 0 -0.000657422002812133 0 0 0;0 0.999999783898132 0 -0.000657422002812133 0 0;0.000657422002812133 0 0.999999783898132 0 0 0;0 0.000657422002812133 0 0.999999783898132 0 0;0 0 0 0 1 0;0 0 0 0 0 1],'R2',[0.999999783898132 0 0.000657422002812133 0 0 0;0 0.999999783898132 0 0.000657422002812133 0 0;-0.000657422002812133 0 0.999999783898132 0 0 0;0 -0.000657422002812133 0 0.999999783898132 0 0;0 0 0 0 1 0;0 0 0 0 0 1]);...
        atdrift('SD3U',0.333165,'Energy',6040000000);...
atthinmultipole('S6',[0 0 0],[0 0 -1.578319],'Energy',6040000000);...
        atdrift('SDA',0.283,'Energy',6040000000);...
       atmarker('BPM');...
        atdrift('SD2D',0.095295,'Energy',6040000000);...
   atquadrupole('QF2',0.94341,0.39100748,'MaxOrder',2,'Energy',6040000000,'R1',[0.999999883500444 0 0.000482699800776386 0 0 0;0 0.999999883500444 0 0.000482699800776386 0 0;-0.000482699800776386 0 0.999999883500444 0 0 0;0 -0.000482699800776386 0 0.999999883500444 0 0;0 0 0 0 1 0;0 0 0 0 0 1],'R2',[0.999999883500444 0 -0.000482699800776386 0 0 0;0 0.999999883500444 0 -0.000482699800776386 0 0;0.000482699800776386 0 0.999999883500444 0 0 0;0 0.000482699800776386 0 0.999999883500444 0 0;0 0 0 0 1 0;0 0 0 0 0 1]);...
        atdrift('SD2U',0.328295,'Energy',6040000000);...
atthinmultipole('S4',[0 0.000506452188 0],[0 0 1.257419],'Energy',6040000000);...
        atdrift('SD1U',0.867,'Energy',6040000000);...
       atmarker('BPM');...
        atdrift('SDHI',3.0526,'Energy',6040000000);...
};

%make full ring with 16 super cells (32 cells)
ring0 = repmat(cell,16,1);

%now add rf cavity
RFCav= atrfcavity('CAV',0,9e6,352199797.549766,992,6040000000);

ring=[ring0;{RFCav}];

end


